<div class="position-relative">
  <div class="profile-banner static-banner"></div>
  <div *ngIf="isOwner && !isEditMode" class="edit-icon-right" (click)="toggleEdit()">
    <i class="bi bi-gear-fill"></i>
  </div>
</div>

<div class="container mt-0 profile-animate delay-1">
  <div class="row g-4 justify-content-center">

    <div class="col-lg-8">
      <div class="main-profile-card bordered-card shadow profile-animate delay-2">
        <div class="text-center position-relative">
          <img [src]="profileImageUrl" class="profile-img" alt="Profile" />
          <div *ngIf="isOwner && isEditMode" class="edit-profile-img-icon">
            <label for="profileInput"><i class="bi bi-pencil-fill"></i></label>
            <input type="file" id="profileInput" hidden (change)="onProfileImageChange($event)" />
          </div>
          <h4 class="mt-3 company-name">{{ username }}</h4>
          <p class="text-muted">{{ industry }}</p>
        </div>

        <div *ngIf="!isEditMode" class="mt-4 profile-info-block profile-animate delay-3">
          <p><i class="bi bi-envelope gradient-icon"></i>{{ email }}</p>
          <p><i class="bi bi-telephone gradient-icon"></i>{{ phone }}</p>
          <p><i class="bi bi-geo-alt gradient-icon"></i>{{ location }}</p>
          <p><i class="bi bi-info-circle gradient-icon"></i>{{ description }}</p>

        </div>

        <div *ngIf="isEditMode" class="mt-4 profile-animate delay-3">
          <input class="form-control mb-2" [(ngModel)]="username" placeholder="Company Name" />
          <input class="form-control mb-2" [(ngModel)]="industry" placeholder="Industry" />
          <input class="form-control mb-2" [(ngModel)]="email" placeholder="Email" />
          <input class="form-control mb-2" [(ngModel)]="phone" placeholder="Phone" />
          <input class="form-control mb-2" [(ngModel)]="location" placeholder="Location" />
          <textarea rows="3" class="form-control" [(ngModel)]="description" placeholder="Company Description"></textarea>
        </div>
      </div>
    </div>

    <div class="col-lg-4">
      <div class="bordered-card shadow p-3 mb-4 famous-jobs-card profile-animate delay-2">
        <h6 class="section-title">Most Applied Jobs</h6>
        <ul class="list-unstyled">
          <li class="clickable-item"><i class="bi bi-laptop me-2"></i> <span class="shiny-hover">Web Developer</span></li>
          <li class="clickable-item"><i class="bi bi-hospital me-2"></i> <span class="shiny-hover">Medical Assistant</span></li>
          <li class="clickable-item"><i class="bi bi-pencil me-2"></i> <span class="shiny-hover">Content Writer</span></li>
          <li class="clickable-item"><i class="bi bi-briefcase me-2"></i> <span class="shiny-hover">Project Manager</span></li>
        </ul>
      </div>

      <div class="bordered-card shadow p-3 famous-companies-card profile-animate delay-3">
        <h6 class="section-title">Employers of the Month</h6>
        <div *ngFor="let emp of topEmployers" class="d-flex align-items-center mb-2 clickable-item">
          <img [src]="emp.avatar" class="employer-avatar me-2" />
          <span class="shiny-hover">{{ emp.name }}</span>
        </div>
      </div>

    </div>


    <div class="col-12 d-flex justify-content-between mt-2 px-1 profile-animate delay-3" *ngIf="isEditMode && isOwner">
      <a routerLink="/changePassword" class="small-link">Change Password</a>
      <a routerLink="/resetPassword" class="small-link">Forgot Password?</a>
    </div>

    <div class="col-12 d-flex justify-content-end gap-2 mt-2 profile-animate delay-3" *ngIf="isEditMode && isOwner">
      <button class="btn btn-primary" (click)="saveChanges()">Save</button>
      <button class="btn btn-secondary" (click)="toggleEdit()">Cancel</button>
    </div>

  </div>
</div>
