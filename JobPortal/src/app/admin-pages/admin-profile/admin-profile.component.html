<div class="position-relative">
  <div class="profile-banner static-banner"></div>
  <div *ngIf="isOwner && !isEditMode" class="edit-icon-right" (click)="toggleEdit()">
    <i class="bi bi-gear-fill"></i>
  </div>
</div>

<div class="main-content">
  <div class="container mt-0">
    <div class="row justify-content-center g-4">
      <div class="col-lg-8">
        <div class="main-profile-card bordered-card shadow text-center">
          <div class="position-relative">
            <img [src]="profileImageUrl" alt="Profile" class="profile-img" />
            <div *ngIf="isEditMode" class="edit-profile-img-icon">
              <label for="profileInput"><i class="bi bi-pencil-fill"></i></label>
              <input type="file" id="profileInput" hidden (change)="onProfileImageChange($event)" />
            </div>
          </div>

          <div class="mt-3">
            <div *ngIf="!isEditMode">
              <p class="mb-1 company-name">{{ username }}</p>
              <p class="mb-3 text-muted">{{ role }}</p>
            </div>
            <div *ngIf="isEditMode" class="d-flex flex-column align-items-center">
              <input type="text" [(ngModel)]="username" class="form-control text-center fw-bold border-0 p-0 mb-1" style="font-size: 1.6rem; background-color: transparent; width: auto;" />
              <input type="text" [(ngModel)]="role" class="form-control text-center text-muted border-0 p-0 mb-2" style="font-size: 1.1rem; background-color: transparent; width: auto;" />
            </div>
          </div>

          <div class="row mt-4 text-start">
            <div class="col-md-6">
              <div *ngIf="!isEditMode">
                <p class="mb-2">
                  <i class="bi bi-envelope-fill static-gradient-icon me-2"></i>
                  <strong>Email:</strong> {{ email }}
                </p>
              </div>
              <div *ngIf="isEditMode">
                <label class="form-label">Email</label>
                <input type="email" class="form-control" [(ngModel)]="email" />
              </div>
            </div>
            <div class="col-md-6">
              <div *ngIf="!isEditMode">
                <p class="mb-2">
                  <i class="bi bi-telephone-fill static-gradient-icon me-2"></i>
                  <strong>Phone:</strong> {{ phone }}
                </p>
              </div>
              <div *ngIf="isEditMode">
                <label class="form-label">Phone</label>
                <input type="tel" class="form-control" [(ngModel)]="phone" />
              </div>
            </div>
          </div>


          <div class="col-12 d-flex justify-content-between mt-2 px-1" *ngIf="isEditMode && isOwner">
            <a routerLink="/changePassword" class="small-link">Change Password</a>
            <a routerLink="/resetPassword" class="small-link">Forgot Password?</a>

          </div>

          <div *ngIf="isEditMode && isOwner" class="d-flex justify-content-end gap-2 mt-2">
            <button type="button" class="btn btn-primary" (click)="saveChanges()">Save</button>
            <button type="button" class="btn btn-secondary" (click)="toggleEdit()">Cancel</button>
          </div>
        </div>
      </div>

      <div class="col-lg-4 d-flex flex-column">
        <div class="most-applied-card side-card" style="margin-top: -100px;">
          <h5 class="section-title">Most Applied Jobs</h5>
          <div class="clickable-item"><i class="bi bi-briefcase-fill"></i><span>Web Developer</span></div>
          <div class="clickable-item"><i class="bi bi-briefcase-fill"></i><span>Medical Assistant</span></div>
          <div class="clickable-item"><i class="bi bi-briefcase-fill"></i><span>Content Creator</span></div>
          <div class="clickable-item"><i class="bi bi-briefcase-fill"></i><span>Project Manager</span></div>
        </div>

        <div class="famous-companies-card side-card keep-below mt-3">
          <h5 class="section-title">Employers of the Month</h5>
          <div class="clickable-item"><img src="pfp1.jpg" class="employer-avatar me-2" /><span>Ahmad Yasin</span></div>
          <div class="clickable-item"><img src="pfp2.jpg" class="employer-avatar me-2" /><span>Ola Radi</span></div>
          <div class="clickable-item"><img src="pfp3.jpg" class="employer-avatar me-2" /><span>Zena Ali</span></div>
          <div class="clickable-item"><img src="pfp4.jpg" class="employer-avatar me-2" /><span>Ali Yusuf</span></div>
        </div>
      </div>
    </div>
  </div>
</div>
